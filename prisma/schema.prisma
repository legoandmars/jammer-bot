datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Playlist {
  spotifyId        String      @id
  inputChannelId   String      @unique
  infoChannelId    String
  ownerCredentials Credentials @relation(fields: [ownerId], references: [userId])
  ownerId          String
  tracks           Track[]
}

model Track {
  spotifyId  String
  userId     String
  playlist   Playlist @relation(fields: [playlistId], references: [spotifyId])
  playlistId String
  addedAt    DateTime @default(now())

  @@id([spotifyId, playlistId])
}

model Credentials {
  userId       String     @id
  accessToken  String
  refreshToken String
  expiresAt    DateTime
  playlists    Playlist[]
}

model AuthRequest {
  id        String   @id
  createdAt DateTime @default(now())
  userId    String
}
